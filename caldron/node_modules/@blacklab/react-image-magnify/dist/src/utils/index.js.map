{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../src/utils/index.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n    CSSProperties, Dispatch, MutableRefObject, SetStateAction,\n} from 'react';\nimport type {\n    ContainerDimensions, ImageProps,\n} from 'src/types';\n\n// eslint-disable-next-line prefer-regex-literals\nconst fluidCheckRegexp = new RegExp(/(%|vh|vw|vmin|vmax|fit-content|max-content|min-content|auto|stretch|available)$/, 'gi');\n\nexport function noop(): void {\n    // noop\n}\n\nexport function isFluidDimension(value: string | number | undefined): boolean {\n    let result = typeof value !== 'number';\n\n    result = result && value !== undefined && fluidCheckRegexp.test(value as string);\n\n    fluidCheckRegexp.lastIndex = 0;\n\n    return result;\n}\n\nexport function isFluid(smallImage: ImageProps): boolean {\n    const result = isFluidDimension(smallImage.height) && isFluidDimension(smallImage.width);\n\n    return (smallImage.height === undefined || smallImage.width === undefined) || result;\n}\n\nexport function styleToCssText(style: CSSProperties): string {\n    return Object.entries(style).map(([k, v]) => `${k.replace(/[A-Z]/g, (match) => `-${match.toLowerCase()}`)}:${v}`).join(';');\n}\n\nexport function capitalize(str: string): string {\n    return str.charAt(0).toUpperCase() + str.slice(1);\n}\n\nexport function imageToStrictDimensions(\n    imageProps: ImageProps,\n    ref?: MutableRefObject<HTMLImageElement | null> | null,\n): ContainerDimensions {\n    if (typeof imageProps.height === 'number' && typeof imageProps.width === 'number') {\n        return {\n            height: imageProps.height,\n            width: imageProps.width,\n        };\n    }\n\n    if (!ref?.current) {\n        return {\n            height: 0,\n            width: 0,\n        };\n    }\n\n    return {\n        height: ref.current.offsetHeight,\n        width: ref.current.offsetWidth,\n    };\n}\n\nexport function resolveSmallImage(\n    smallImageProp: ImageProps,\n    smallImageHeight?: number | string,\n    smallImageWidth?: number | string,\n): ImageProps {\n    const smallImage = {\n        ...smallImageProp,\n        height: smallImageHeight || smallImageProp.height || '100%',\n        width: smallImageWidth || smallImageProp.width || '100%',\n    };\n\n    if (!smallImage.onLoad) {\n        smallImage.onLoad = noop;\n    }\n\n    return smallImage;\n}\n\nexport function setSmallImageDimensionState(\n    img: HTMLImageElement | null,\n    setSmallImage: Dispatch<SetStateAction<ImageProps>>,\n    smallImageProp: ImageProps,\n): void {\n    if (img) {\n        const {\n            naturalHeight, naturalWidth, offsetHeight, offsetWidth,\n        } = img;\n        const newSmallImage = resolveSmallImage(\n            smallImageProp,\n            isFluidDimension(smallImageProp.height) ? smallImageProp.height : offsetHeight || naturalHeight,\n            isFluidDimension(smallImageProp.width) ? smallImageProp.width : offsetWidth || naturalWidth,\n        );\n\n        setSmallImage(newSmallImage);\n    }\n}\n"]}