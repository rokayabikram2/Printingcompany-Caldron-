{"version":3,"file":"ReactImageMagnify.js","sourceRoot":"","sources":["../../src/ReactImageMagnify.tsx"],"names":[],"mappings":"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","sourcesContent":["import { primaryInput } from 'detect-it';\nimport {\n    CSSProperties,\n    MouseEvent,\n    TouchEvent,\n    useEffect,\n    useLayoutEffect,\n    useMemo,\n    useRef,\n    useState,\n} from 'react';\n\nimport { MagnifyContainerPortal } from 'src/MagnifyContainerPortal';\nimport { NegativeSpaceLens } from 'src/lens/negative-space';\nimport { PositiveSpaceLens } from 'src/lens/positive-space';\nimport { DefaultHint } from 'src/hint/DefaultHint';\nimport { getLensCursorOffset } from 'src/lib/lens';\nimport { getEnlargedImageContainerDimension } from 'src/lib/dimensions';\nimport { CursorPosition } from 'src/CursorPosition';\nimport { InPlaceMagnifyContainer } from 'src/InPlaceMagnifyContainer';\nimport {\n    getContainerStyle,\n    getSmallImageStyle,\n} from 'src/lib/styles';\nimport {\n    capitalize, imageToStrictDimensions, isFluid, resolveSmallImage, setSmallImageDimensionState,\n} from 'src/utils';\nimport {\n    INPUT_TYPE,\n    INTERACTIONS,\n    DEFAULT_MAGNIFY_CONTAINER_HEIGHT,\n    DEFAULT_MAGNIFY_CONTAINER_WIDTH,\n    MagnifiedImagePosition,\n} from 'src/constants';\nimport type {\n    ImageProps,\n    DetectedInputType,\n    ReactImageMagnifyProps,\n    ContainerDimensions,\n} from 'src/types';\n\nconst shouldShowHint = (activationInteractionHint: ReactImageMagnifyProps['activationInteractionHint']): boolean => (\n    activationInteractionHint === INTERACTIONS.click\n    || activationInteractionHint === INTERACTIONS.hover\n);\n\nexport const ReactImageMagnify = (props: ReactImageMagnifyProps): JSX.Element => {\n    const {\n        activationInteractionHint,\n        activationInteractionMouse = INTERACTIONS.hover,\n        activationInteractionTouch = INTERACTIONS.press,\n        fadeDurationInMs = 300,\n        hintComponent: HintComponent = DefaultHint,\n        hintProps,\n        isEnabled = true,\n        imageComponent: ImageComponent = 'img',\n        imageProps,\n        lensComponent: LensComponentProp,\n        lensProps,\n        magnifyContainerProps,\n        magnifiedImageComponent,\n        magnifiedImageProps,\n        portalProps: portalPropsProp,\n        shouldUsePositiveSpaceLens = false,\n        style,\n        ...rest\n    } = props;\n    const { onLoad, ...usabledImageProps } = imageProps;\n    const isZoomClickable = activationInteractionHint === INTERACTIONS.click;\n\n    // Prop Validation\n    if (\n        activationInteractionHint\n        && activationInteractionMouse === INTERACTIONS.click\n        && process?.env?.NODE_ENV !== 'production'\n    ) {\n        // eslint-disable-next-line no-console\n        console.warn(`[ReactImageMagnify]\n        Warning! \"activationInteractionHint\" is set to ${activationInteractionHint} and \"activationInteractionMouse\" is set to ${INTERACTIONS.click}.\n        These are incompatible options and may beahve unexpectedly.\n        `);\n    }\n\n    ///\n    /// Hooks\n    ///\n\n    const imageRef = useRef<HTMLImageElement>(null);\n    const [smallImage, setSmallImage] = useState<ImageProps>(resolveSmallImage(imageProps));\n    const [isMouseDetected, setIsMouseDetected] = useState(primaryInput === INPUT_TYPE.mouse);\n    const [isTouchDetected, setIsTouchDetected] = useState(primaryInput === INPUT_TYPE.touch);\n    const [imageLoaded, setImageLoaded] = useState(false);\n    const [lockedByHintInteraction, setLockedByHintInteraction] = useState(isZoomClickable);\n\n    ///\n    /// Derived data from state\n    ///\n\n    const portalProps = {\n        ...portalPropsProp,\n        placement: portalPropsProp?.placement || (isTouchDetected\n            ? MagnifiedImagePosition.OVER\n            : MagnifiedImagePosition.AUTO),\n    };\n    const isInPlaceMode = portalProps.placement === MagnifiedImagePosition.OVER;\n    const shouldShowLens = !isInPlaceMode && !isTouchDetected;\n\n    ///\n    /// Memos\n    ///\n\n    const resizeHandler = useMemo(() => (): void => setSmallImageDimensionState(\n        imageRef.current,\n        setSmallImage,\n        imageProps,\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    ), []);\n\n    const computedEnlargedImageContainerDimensions = useMemo(() => ({\n        width: getEnlargedImageContainerDimension(\n            magnifyContainerProps?.width || DEFAULT_MAGNIFY_CONTAINER_WIDTH,\n            imageRef?.current?.offsetWidth || smallImage.width || DEFAULT_MAGNIFY_CONTAINER_WIDTH,\n            magnifyContainerProps?.scale,\n            isInPlaceMode,\n        ),\n        height: getEnlargedImageContainerDimension(\n            magnifyContainerProps?.height || DEFAULT_MAGNIFY_CONTAINER_HEIGHT,\n            imageRef?.current?.offsetHeight || smallImage.height || DEFAULT_MAGNIFY_CONTAINER_HEIGHT,\n            magnifyContainerProps?.scale,\n            isInPlaceMode,\n        ),\n    } as ContainerDimensions), [magnifyContainerProps, smallImage, isInPlaceMode]);\n\n    const cursorOffset = useMemo(() => getLensCursorOffset(\n        imageToStrictDimensions(smallImage, imageRef),\n        magnifiedImageProps,\n        computedEnlargedImageContainerDimensions,\n    ), [computedEnlargedImageContainerDimensions, magnifiedImageProps, smallImage]);\n\n    ///\n    /// Effects\n    ///\n\n    useEffect(() => {\n        setSmallImage(resolveSmallImage(imageProps));\n    }, [imageProps]);\n\n    useEffect(() => {\n        setLockedByHintInteraction(activationInteractionHint === INTERACTIONS.click);\n    }, [activationInteractionHint]);\n\n    useEffect(() => {\n        if (!isFluid(imageProps)) {\n            setSmallImageDimensionState(imageRef.current, setSmallImage, imageProps);\n\n            window.addEventListener('resize', resizeHandler);\n        } else {\n            window.removeEventListener('resize', resizeHandler);\n        }\n\n        return (): void => window.removeEventListener('resize', resizeHandler);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [imageProps, imageRef]);\n\n    ///\n    /// Handlers\n    ///\n\n    const generateHintStyle = (hintPropsStyle: CSSProperties | undefined): CSSProperties => {\n        const hintStyle = { ...hintPropsStyle };\n\n        // Check and set via if-statements to prevent accidentally overriding existing\n        // styles or styles that are set later\n        if (lockedByHintInteraction) {\n            hintStyle.cursor = 'pointer';\n        }\n\n        return hintStyle;\n    };\n\n    const handleDetectedEnvironmentChanged = (detectedInputType: DetectedInputType): void => {\n        setIsMouseDetected(detectedInputType.isMouseDetected);\n        setIsTouchDetected(detectedInputType.isTouchDetected);\n    };\n\n    const handleHintClick = (e: MouseEvent<unknown>): void => {\n        e.preventDefault();\n        e.stopPropagation();\n        setLockedByHintInteraction(false);\n    };\n\n    const handleHintTouchEnd = (e: TouchEvent<unknown>): void => {\n        e.preventDefault();\n        e.stopPropagation();\n        setLockedByHintInteraction(false);\n    };\n\n    const handleOutsideClick = (): void => {\n        if (isZoomClickable) {\n            setLockedByHintInteraction(true);\n        }\n    };\n\n    const onImageComplete = (): void => {\n        if (!isFluid(imageProps)) {\n            setSmallImageDimensionState(imageRef.current, setSmallImage, imageProps);\n        }\n\n        setImageLoaded(true);\n    };\n\n    const handleImageLoadOrComplete = (e: Event): void => {\n        if (!imageLoaded) {\n            if (smallImage.onLoad) {\n                smallImage.onLoad(e);\n            }\n\n            onImageComplete();\n        }\n    };\n\n    const HintComponentOrNull = activationInteractionHint && shouldShowHint(activationInteractionHint)\n        ? (\n            <HintComponent\n                {...hintProps}\n                hintTextMouse={hintProps?.hintTextMouse || `${capitalize(activationInteractionHint)} to Zoom`}\n                hintTextTouch={hintProps?.hintTextTouch || 'Long-Touch to Zoom'}\n                isMouseDetected={isMouseDetected}\n                isTouchDetected={isTouchDetected}\n                style={generateHintStyle(hintProps?.style)}\n                onClick={lockedByHintInteraction ? handleHintClick : undefined}\n                onTouchEnd={lockedByHintInteraction ? handleHintTouchEnd : undefined}\n            />\n        ) : null;\n\n    const LensComponent = LensComponentProp || shouldUsePositiveSpaceLens ? PositiveSpaceLens : NegativeSpaceLens;\n\n    ///\n    /// More Effects\n    ///\n\n    useLayoutEffect(() => {\n        if (imageRef.current?.complete) {\n            onImageComplete();\n        }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    useEffect(() => {\n        if (imageRef.current) {\n            imageRef.current.onload = handleImageLoadOrComplete;\n        }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    return (\n        <CursorPosition\n            shouldStopTouchMovePropagation\n            activationInteractionMouse={activationInteractionMouse}\n            activationInteractionTouch={activationInteractionTouch}\n            isEnabled={isEnabled}\n            style={getContainerStyle(smallImage, style, lockedByHintInteraction)}\n            onDetectedEnvironmentChanged={handleDetectedEnvironmentChanged}\n            onOutsideClick={handleOutsideClick}\n            {...rest}\n        >\n            {({ position, isActive, isPositionOutside }): JSX.Element => (\n                <>\n                    <ImageComponent\n                        {...usabledImageProps}\n                        alt={smallImage.alt}\n                        ref={imageRef}\n                        style={getSmallImageStyle(smallImage, imageProps.style)}\n                    />\n                    {imageLoaded && (\n                        <>\n                            {HintComponentOrNull}\n                            {shouldShowLens && !lockedByHintInteraction && (\n                                <LensComponent\n                                    cursorOffset={cursorOffset}\n                                    fadeDurationInMs={fadeDurationInMs}\n                                    isActive={isActive}\n                                    isPositionOutside={isPositionOutside}\n                                    position={position}\n                                    {...lensProps}\n                                    ref={imageRef}\n                                />\n                            )}\n                            {isInPlaceMode && !lockedByHintInteraction && (\n                                <InPlaceMagnifyContainer\n                                    containerDimensions={computedEnlargedImageContainerDimensions}\n                                    cursorOffset={cursorOffset}\n                                    fadeDurationInMs={fadeDurationInMs}\n                                    imageComponent={magnifiedImageComponent}\n                                    imageProps={magnifiedImageProps}\n                                    isActive={isActive}\n                                    isPositionOutside={isPositionOutside}\n                                    position={position}\n                                    sourceImageDimensions={imageToStrictDimensions(smallImage, imageRef)}\n                                    {...magnifyContainerProps}\n                                />\n                            )}\n                            {!isInPlaceMode && !lockedByHintInteraction && (\n                                <MagnifyContainerPortal\n                                    containerDimensions={computedEnlargedImageContainerDimensions}\n                                    cursorOffset={cursorOffset}\n                                    fadeDurationInMs={fadeDurationInMs}\n                                    imageComponent={magnifiedImageComponent}\n                                    imageProps={magnifiedImageProps}\n                                    isActive={isActive}\n                                    isPositionOutside={isPositionOutside}\n                                    portalProps={portalProps}\n                                    position={position}\n                                    sourceImageDimensions={imageToStrictDimensions(smallImage, imageRef)}\n                                    {...magnifyContainerProps}\n                                    ref={imageRef}\n                                />\n                            )}\n                        </>\n                    )}\n                </>\n            )}\n        </CursorPosition>\n    );\n};\n"]}